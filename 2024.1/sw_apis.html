


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

	<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="37701bd4-e5c0-4ee3-9329-e7475d0b13a7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="_static/js/gtm.js"></script>
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="_static/js/linkid.js"></script>
    <script type="text/javascript" src="_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using the Test Harness" href="using_the_harness.html" />
    <link rel="prev" title="Hardware Features" href="hw_features.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a target="_blank" href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a target="_blank" href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> AIE Test Harness
          

          
          </a>

          
            
            
              <div class="version">
                2024.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="hw_features.html">Hardware Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Software APIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#client-apis">Client APIs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#initialization">Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-aie-graph">Running the AIE Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-test-harness">Running the Test Harness</a></li>
<li class="toctree-l3"><a class="reference internal" href="#waiting-for-completion">Waiting for Completion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reporting-performance">Reporting Performance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#server-application">Server Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#usage-of-server-application">Usage of server application</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="using_the_harness.html">Using the Test Harness</a></li>
<li class="toctree-l1"><a class="reference internal" href="step_by_step_example.html">Step by Step Example</a></li>
</ul>
<p class="caption"><span class="caption-text">Additional Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="trademark.html">Trademark Notice</a></li>
</ul>

            
			
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AIE Test Harness</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Software APIs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound" id="sw-apis">
</div>
<div class="section" id="software-apis">
<h1>Software APIs<a class="headerlink" href="#software-apis" title="Permalink to this headline">¶</a></h1>
<div class="section" id="client-apis">
<h2>Client APIs<a class="headerlink" href="#client-apis" title="Permalink to this headline">¶</a></h2>
<p>The AIE test harness includes software APIs for user to easily build SW applications to test an AIE graph on hardware board.
The SW application can be executed on the both the x86 and the embedded ARM processor of the Versal device.
The APIs are designed to structure the test applications following these simple steps:</p>
<ul class="simple">
<li>Create socket and connect to the server with the given IP address and port.</li>
<li>Initialize the device and load the xclbin.</li>
<li>Run the AIE graph with the given iterations.</li>
<li>Configure the DMA channels and start the DMA for the data transfers between the PL and AIE graph.</li>
<li>Wait for all transactions done and receive all results from the server.</li>
<li>Report throughputs of each channel, delays between two given channels and and optionally check correctness of results on functional testing mode or performance testing mode with limited data size</li>
<li>Automatically synchronize the AIE event traces from the server to the local working directory when required.</li>
</ul>
<p>The test harness client APIs are included in <a class="reference external" href="https://github.com/Xilinx/AI-Engine-Test-Harness/tree/main/include/ps/test_harness_mgr_client.hpp">include/ps/test_harness_mgr_client.hpp</a>.</p>
<div class="section" id="initialization">
<h3>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="_CPPv323test_harness_mgr_client">
<span id="_CPPv223test_harness_mgr_client"></span><span id="test_harness_mgr_client"></span><em class="property">class </em><code class="descname">test_harness_mgr_client</code><a class="headerlink" href="#_CPPv323test_harness_mgr_client" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The test harness manager class. This class encapsulates the necessary runtime objects to interact with the hardware DMA channels and the AIE graph. All test harness APIs belong to this class.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N23test_harness_mgr_client23test_harness_mgr_clientENSt6stringERKNSt6vectorINSt6stringEEERKNSt6stringEK8uint64_tj">
<span id="_CPPv2N23test_harness_mgr_client23test_harness_mgr_clientENSt6stringERKNSt6vectorINSt6stringEEERKNSt6stringEK8uint64_tj"></span><span id="test_harness_mgr_client::test_harness_mgr_client__ss.std::vector:ss:CR.ssCR.uint64_tC.unsigned-i"></span><code class="descclassname"><a class="reference internal" href="#_CPPv3N23test_harness_mgr_client23test_harness_mgr_clientENSt6stringERKNSt6vectorINSt6stringEEERKNSt6stringEK8uint64_tj" title="test_harness_mgr_client::test_harness_mgr_client">test_harness_mgr_client</a><code class="descclassname">::</code></code><code class="descname">test_harness_mgr_client</code><span class="sig-paren">(</span>std::string <em>xclbin_file_path</em>, <em class="property">const</em> std::vector&lt;std::string&gt; &amp;<em>graph_name</em>, <em class="property">const</em> std::string &amp;<em>device_name</em>, <em class="property">const</em> uint64_t <em>timeout_miliseconds</em> = 0, unsigned int <em>device_index</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N23test_harness_mgr_client23test_harness_mgr_clientENSt6stringERKNSt6vectorINSt6stringEEERKNSt6stringEK8uint64_tj" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The test harness manager class constructor. Loads the xclbin to the device and initializes the various test harness runtime objects.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">xclbin_path</span></code></dt>
<dd>The path and name of the xclbin file to be loaded and used for testing. The xclbin file must contain the AI Engine graph(s) to be tested.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::string&gt;</span> <span class="pre">graph_name</span></code></dt>
<dd>The vector of graph names in the libadf.a packaged in the xclbin file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">device_name</span></code></dt>
<dd>The device name for the testing board. The device name is used to identify the target device in the xclbin file, acceptable values are <code class="docutils literal notranslate"><span class="pre">vck190</span></code> and <code class="docutils literal notranslate"><span class="pre">vek280</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">uint64_t</span> <span class="pre">timeout_miliseconds</span></code></dt>
<dd>The timeout limit in milliseconds for connecting to the server. This parameter is optional, and the default value is zero, which means no timeout limit.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">device_index</span></code></dt>
<dd>The device ID of the testing board, by default it is zero</dd>
</dl>
</div>
<div class="section" id="running-the-aie-graph">
<h3>Running the AIE Graph<a class="headerlink" href="#running-the-aie-graph" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="_CPPv3N23test_harness_mgr_client11runAIEGraphEjj">
<span id="_CPPv2N23test_harness_mgr_client11runAIEGraphEjj"></span><span id="test_harness_mgr_client::runAIEGraph__unsigned-i.unsigned-i"></span>void <code class="descclassname"><a class="reference internal" href="#_CPPv323test_harness_mgr_client" title="test_harness_mgr_client">test_harness_mgr_client</a><code class="descclassname">::</code></code><code class="descname">runAIEGraph</code><span class="sig-paren">(</span>unsigned int <em>g_idx</em>, unsigned int <em>iters</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N23test_harness_mgr_client11runAIEGraphEjj" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Run the specified AI Engine graph for a specific number of iterations. To ensure accurate performance results, this function should be called <strong>before</strong> <a class="reference internal" href="#_CPPv3N23test_harness_mgr_client14runTestHarnessE8TestModeRKNSt6vectorI17test_harness_argsEE8uint32_t" title="test_harness_mgr_client::runTestHarness"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">test_harness_mgr_client::runTestHarness()</span></code></a> when user wants to profile a valid performance after the HW board-run.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">g_idx</span></code></dt>
<dd>The index of the graph in the vector of graph names passed to the class constructor. For designs with a single graph, this argument is zero.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">iters</span></code></dt>
<dd>The number of graph iterations to run</dd>
</dl>
</div>
<div class="section" id="running-the-test-harness">
<h3>Running the Test Harness<a class="headerlink" href="#running-the-test-harness" title="Permalink to this headline">¶</a></h3>
<dl class="enum">
<dt id="_CPPv38TestMode">
<span id="_CPPv28TestMode"></span><em class="property">enum </em><code class="descname">TestMode</code><a class="headerlink" href="#_CPPv38TestMode" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The test harness can run in either functional testing mode <code class="docutils literal notranslate"><span class="pre">FUNC_MODE</span></code> or performance testing mode <code class="docutils literal notranslate"><span class="pre">PERF_MODE</span></code>. The functional testing mode is used to verify the functionalities of the AIE design, while the performance testing mode is used to measure the performance e.g., throughput and latency.</p>
</dd></dl>

<dl class="enum">
<dt id="_CPPv313channel_index">
<span id="_CPPv213channel_index"></span><em class="property">enum </em><code class="descname">channel_index</code><a class="headerlink" href="#_CPPv313channel_index" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enumerated type listing the index of each DMA channel. The enumerated values corresponding to the names of the predefined PLIOs: <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">PLIO_01_TO_AIE</span></code>, <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">PLIO_02_TO_AIE</span></code>, etc…</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv317test_harness_args">
<span id="_CPPv217test_harness_args"></span><span id="test_harness_args"></span><em class="property">class </em><code class="descname">test_harness_args</code><a class="headerlink" href="#_CPPv317test_harness_args" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>This class encapsulates the necessary information to configure the DMA channels for data transfers between the PL and AIE.</p>
</dd></dl>

<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">idx</span></code></dt>
<dd>The index of the DMA channel to be used, specified using the <a class="reference internal" href="#_CPPv313channel_index" title="channel_index"><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">channel_index</span></code></a> enum. The index corresponds to the name of the targeted AIE PLIO, and implicitly specifies the direction of the data transfer.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_in_byte</span></code></dt>
<dd>The size (in bytes) of one data frame to be transferred to or from the AIE</dd>
<dt><code class="docutils literal notranslate"><span class="pre">replay</span></code></dt>
<dd>Number of replays used for test harness to perform the data transfer between PL and AIE multiple times, only valid in the performance testing mode.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delay</span></code></dt>
<dd>The start delay (in PL clock cycles) for this channel</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code></dt>
<dd>Pointer to the data that you want read or receive</dd>
</dl>
<dl class="function">
<dt id="_CPPv3N23test_harness_mgr_client14runTestHarnessE8TestModeRKNSt6vectorI17test_harness_argsEE8uint32_t">
<span id="_CPPv2N23test_harness_mgr_client14runTestHarnessE8TestModeRKNSt6vectorI17test_harness_argsEE8uint32_t"></span><span id="test_harness_mgr_client::runTestHarness__TestMode.std::vector:test_harness_args:CR.uint32_t"></span>void <code class="descclassname"><a class="reference internal" href="#_CPPv323test_harness_mgr_client" title="test_harness_mgr_client">test_harness_mgr_client</a><code class="descclassname">::</code></code><code class="descname">runTestHarness</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv38TestMode" title="TestMode">TestMode</a> <em>mode</em>, <em class="property">const</em> std::vector&lt;<a class="reference internal" href="#_CPPv317test_harness_args" title="test_harness_args">test_harness_args</a>&gt; &amp;<em>args</em>, uint32_t <em>timeout</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N23test_harness_mgr_client14runTestHarnessE8TestModeRKNSt6vectorI17test_harness_argsEE8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create a test harness transaction to run the test harness in the given mode with the specified DMA channel arguments. In performance testing mode, to ensure accurate performance results, this function should be called after <a class="reference internal" href="#_CPPv3N23test_harness_mgr_client11runAIEGraphEjj" title="test_harness_mgr_client::runAIEGraph"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">test_harness_mgr_client::runAIEGraph()</span></code></a>.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">TestMode</span> <span class="pre">mode</span></code></dt>
<dd>The testing mode to be used e.g., <code class="docutils literal notranslate"><span class="pre">FUNC_MODE</span></code> or <code class="docutils literal notranslate"><span class="pre">PERF_MODE</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">std::vector&lt;test_harness_args&gt;</span> <span class="pre">args</span></code></dt>
<dd>A vector of DMA channel arguments</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">timeout</span></code></dt>
<dd>Timeout limit in milliseconds for the test harness to finish. This parameter is optional, and the default value is zero, which means no timeout limit.</dd>
</dl>
</div>
<div class="section" id="waiting-for-completion">
<h3>Waiting for Completion<a class="headerlink" href="#waiting-for-completion" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="_CPPv3N23test_harness_mgr_client10waitForResE8uint32_t8uint32_t">
<span id="_CPPv2N23test_harness_mgr_client10waitForResE8uint32_t8uint32_t"></span><span id="test_harness_mgr_client::waitForRes__uint32_t.uint32_t"></span>void <code class="descclassname"><a class="reference internal" href="#_CPPv323test_harness_mgr_client" title="test_harness_mgr_client">test_harness_mgr_client</a><code class="descclassname">::</code></code><code class="descname">waitForRes</code><span class="sig-paren">(</span>uint32_t <em>timeout_millisec</em>, uint32_t <em>num_trans</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N23test_harness_mgr_client10waitForResE8uint32_t8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wait for <code class="docutils literal notranslate"><span class="pre">num_trans</span></code> test harness transactions done and get back the results to the client application.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">graph_timeout_millisec</span></code></dt>
<dd>Timeout limit in milliseconds for test harness transactions to finish. This function can be blocked permanently if the DMA channels are configured to send or receive more data than what the AIE graph will actually consume or produce.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">num_trans</span></code></dt>
<dd>The number of transactions to wait for. If the value is zero, the function will wait for all unfinished transactions and all graph iteration to finish.</dd>
</dl>
</div>
<div class="section" id="reporting-performance">
<h3>Reporting Performance<a class="headerlink" href="#reporting-performance" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="_CPPv3N23test_harness_mgr_client9printPerfE7int32_t">
<span id="_CPPv2N23test_harness_mgr_client9printPerfE7int32_t"></span><span id="test_harness_mgr_client::printPerf__int32_t"></span>void <code class="descclassname"><a class="reference internal" href="#_CPPv323test_harness_mgr_client" title="test_harness_mgr_client">test_harness_mgr_client</a><code class="descclassname">::</code></code><code class="descname">printPerf</code><span class="sig-paren">(</span>int32_t <em>t_idx</em> = -1<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N23test_harness_mgr_client9printPerfE7int32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Print the total number of cycles elapsed between the start and the end of the data transfer, and the throughputs for each DMA channel of given transaction. Must be called once the <a class="reference internal" href="#_CPPv3N23test_harness_mgr_client10waitForResE8uint32_t8uint32_t" title="test_harness_mgr_client::waitForRes"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">test_harness_mgr_client::waitForRes()</span></code></a> is returned.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">int32_t</span> <span class="pre">t_idx</span></code></dt>
<dd>The index of the transaction to be printed. If the value is -1, the performance of the last finished transaction is printed.</dd>
</dl>
<dl class="function">
<dt id="_CPPv3N23test_harness_mgr_client13isResultValidE7int32_t">
<span id="_CPPv2N23test_harness_mgr_client13isResultValidE7int32_t"></span><span id="test_harness_mgr_client::isResultValid__int32_t"></span>bool <code class="descclassname"><a class="reference internal" href="#_CPPv323test_harness_mgr_client" title="test_harness_mgr_client">test_harness_mgr_client</a><code class="descclassname">::</code></code><code class="descname">isResultValid</code><span class="sig-paren">(</span>int32_t <em>t_idx</em> = -1<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N23test_harness_mgr_client13isResultValidE7int32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check if the results of the given transaction are valid. Must be called once the <a class="reference internal" href="#_CPPv3N23test_harness_mgr_client10waitForResE8uint32_t8uint32_t" title="test_harness_mgr_client::waitForRes"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">test_harness_mgr_client::waitForRes()</span></code></a> is returned. The results could be invalid due to timeout transactions or large amount of data are used in the performance testing mode.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">int32_t</span> <span class="pre">t_idx</span></code>
The index of the transaction to be checked. If the value is -1, the results of the last finished transaction are checked.</div></blockquote>
<dl class="function">
<dt id="_CPPv3N23test_harness_mgr_client15getDelayBetweenE13channel_index13channel_index7int32_t">
<span id="_CPPv2N23test_harness_mgr_client15getDelayBetweenE13channel_index13channel_index7int32_t"></span><span id="test_harness_mgr_client::getDelayBetween__channel_index.channel_index.int32_t"></span>int <code class="descclassname"><a class="reference internal" href="#_CPPv323test_harness_mgr_client" title="test_harness_mgr_client">test_harness_mgr_client</a><code class="descclassname">::</code></code><code class="descname">getDelayBetween</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv313channel_index" title="channel_index">channel_index</a>, <a class="reference internal" href="#_CPPv313channel_index" title="channel_index">channel_index</a>, int32_t <em>t_idx</em> = -1<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N23test_harness_mgr_client15getDelayBetweenE13channel_index13channel_index7int32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the delay between two given channels in the given transaction. Must be called once the <a class="reference internal" href="#_CPPv3N23test_harness_mgr_client10waitForResE8uint32_t8uint32_t" title="test_harness_mgr_client::waitForRes"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">test_harness_mgr_client::waitForRes()</span></code></a> is returned.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">channel_index</span></code>
The index of the first channel
<code class="docutils literal notranslate"><span class="pre">channel_index</span></code>
The index of the second channel
<code class="docutils literal notranslate"><span class="pre">int32_t</span> <span class="pre">t_idx</span></code>
The index of the transaction to be checked. If the value is -1, the results of the last finished transaction are checked.</div></blockquote>
</div>
</div>
<div class="section" id="server-application">
<h2>Server Application<a class="headerlink" href="#server-application" title="Permalink to this headline">¶</a></h2>
<p>The AIE test harness server application is fixed and keeps running on the Arm processor of target Versal board.
The server application is responsible for the following tasks:</p>
<ul class="simple">
<li>Create socket and wait for the client connection.</li>
<li>Create a test harness session and handshake with the client to synchronize the test harness settings with the client e.g., the number of available PLIOs</li>
<li>Initialize the device and load the xclbin from the client when requested.</li>
<li>Run the AIE graph with the given iterations when requested.</li>
<li>Run the test harness DMA with the data from the client when requested.</li>
<li>Wait for the DMA transactions to finish and send the results back to the client.</li>
<li>Wait for the graph iterations to finish.</li>
<li>Synchronize the AIE event traces to the client when required.</li>
<li>Clean up the resources and user data when the client disconnects.</li>
</ul>
<div class="section" id="usage-of-server-application">
<h3>Usage of server application<a class="headerlink" href="#usage-of-server-application" title="Permalink to this headline">¶</a></h3>
<p>A script named <code class="docutils literal notranslate"><span class="pre">run_server.sh</span></code> is provided to run the server application on the target board, refer to the <a class="reference internal" href="step_by_step_example.html#step-by-step"><span class="std std-ref">step by step example</span></a>.
The script is located in the repo <a class="reference external" href="https://github.com/Xilinx/AI-Engine-Test-Harness/tree/main/test_harness/scripts/run_server.sh">test_harness/scripts/run_server.sh</a>.
The pre-built application named <code class="docutils literal notranslate"><span class="pre">test_harness_server</span></code> is included in the SD card image.
The source code is located in the repo <a class="reference external" href="https://github.com/Xilinx/AI-Engine-Test-Harness/tree/main/src/ps/test_harness_main.cpp">src/ps/test_harness_main.cpp</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_harness_server</span> <span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">timeout_in_seconds</span> <span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">reset_flag</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">max_num_sessions</span><span class="o">&gt;</span>

<span class="o">-</span> <span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">port</span> <span class="n">number</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">for</span> <span class="n">the</span> <span class="n">socket</span> <span class="n">connection</span><span class="o">.</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">timeout_in_seconds</span><span class="o">&gt;</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">timeout</span> <span class="n">limit</span> <span class="ow">in</span> <span class="n">seconds</span> <span class="k">for</span> <span class="n">the</span> <span class="n">server</span> <span class="n">watchdog</span> <span class="n">to</span> <span class="n">terminate</span> <span class="n">a</span> <span class="n">session</span> <span class="k">if</span> <span class="n">no</span> <span class="n">valid</span> <span class="n">activity</span> <span class="n">detected</span><span class="o">.</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">reset_flag</span><span class="o">&gt;</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">flag</span> <span class="n">to</span> <span class="n">reset</span> <span class="n">the</span> <span class="n">whole</span> <span class="n">device</span> <span class="k">for</span> <span class="n">each</span> <span class="n">session</span><span class="o">.</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">max_num_sessions</span><span class="o">&gt;</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">sessions</span> <span class="n">to</span> <span class="n">be</span> <span class="n">supported</span> <span class="n">by</span> <span class="n">the</span> <span class="n">server</span><span class="o">.</span> <span class="mi">0</span> <span class="n">means</span> <span class="n">no</span> <span class="n">limit</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="using_the_harness.html" class="btn btn-neutral float-right" title="Using the Test Harness" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hw_features.html" class="btn btn-neutral float-left" title="Hardware Features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on June 09, 2025.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a target="_blank" href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2022 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
								<li><a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>