<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>Software API &mdash; AIE Test Harness v2023.1 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Build With Test Harness" href="build_with_harness.html" />
    <link rel="prev" title="Hareware Features" href="hw_feature.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="index.html" class="icon icon-home"> AIE Test Harness
          </a>
              <div class="version">
                2023.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="hw_feature.html">Hareware Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Software API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#constructor">Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-aie-graph">Run AIE Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-test-harness">Run Test Harness</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wait-for-result">Wait for Result</a></li>
<li class="toctree-l2"><a class="reference internal" href="#print-performance">Print Performance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build_with_harness.html">Build With Test Harness</a></li>
<li class="toctree-l1"><a class="reference internal" href="step_by_step.html">Step by Step</a></li>
<li class="toctree-l1"><a class="reference internal" href="limits.html">Limitation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AIE Test Harness</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Software API</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="toctree-wrapper compound" id="overview">
</div>
<div class="section" id="software-api">
<h1>Software API<a class="headerlink" href="#software-api" title="Permalink to this headline">¶</a></h1>
<p>To run test harness with developer’s AI Engine applications on board, we need software APIs to help PS programs to initialize device and setup parameters to run PL and AIE. You can find them in <code class="docutils literal notranslate"><span class="pre">include/vck190_test_harness_mgr.hpp</span></code>. Basically, you can instantiate an instance of <code class="docutils literal notranslate"><span class="pre">test_harness_mgr</span></code> and call its member functions.</p>
<div class="section" id="constructor">
<h2>Constructor<a class="headerlink" href="#constructor" title="Permalink to this headline">¶</a></h2>
<p>The constructor of class <code class="docutils literal notranslate"><span class="pre">test_harness_mgr</span></code> will help initialize the device. Argument <code class="docutils literal notranslate"><span class="pre">device_index</span></code> is the device id of your testing board, typically it will be zero. Argument <code class="docutils literal notranslate"><span class="pre">xclbin_file_path</span></code> is the path to your xclbin file to be tested. Argument <code class="docutils literal notranslate"><span class="pre">graph_name</span></code> is the vector of graph names which packaged inside the xclbin file.</p>
<pre class="highlight literal-block">
<span></span><span class="n">test_harness_mgr</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">device_index</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">xclbin_file_path</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">graph_name</span><span class="p">);</span>
</pre>
</div>
<div class="section" id="run-aie-graph">
<h2>Run AIE Graph<a class="headerlink" href="#run-aie-graph" title="Permalink to this headline">¶</a></h2>
<p>Function <code class="docutils literal notranslate"><span class="pre">test_harness_mgr::runAIEGraph</span></code> is to run the specified AI Engine graph for a specified number of iterations. Argument <code class="docutils literal notranslate"><span class="pre">g_idx</span></code> is the graph’s reference id in list of graph names. Argument <code class="docutils literal notranslate"><span class="pre">iters</span></code> is the number of iterations that you’d like to run.</p>
<pre class="highlight literal-block">
<span></span><span class="kt">void</span> <span class="nf">runAIEGraph</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">g_idx</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">iters</span><span class="p">);</span>
</pre>
</div>
<div class="section" id="run-test-harness">
<h2>Run Test Harness<a class="headerlink" href="#run-test-harness" title="Permalink to this headline">¶</a></h2>
<p>Function <code class="docutils literal notranslate"><span class="pre">test_harness_mgr::runTestHarness</span></code> is to run the test harness. Its only input is a vector of <code class="docutils literal notranslate"><span class="pre">test_harness_args</span></code>. <code class="docutils literal notranslate"><span class="pre">test_harness_args::idx</span></code> is the channel you want to use; <code class="docutils literal notranslate"><span class="pre">test_harness_args::size_in_byte</span></code> is the size of one data frame that you want to send or receive; <code class="docutils literal notranslate"><span class="pre">test_harness_args::delay</span></code> is the delays cycles for this channel; <code class="docutils literal notranslate"><span class="pre">test_harness_args::data</span></code> is a pointer to the data that you want read or receive.</p>
<pre class="highlight literal-block">
<span></span><span class="kt">void</span> <span class="nf">runTestHarness</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">test_harness_args</span><span class="o">&gt;</span> <span class="n">args</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">test_harness_args</span> <span class="p">{</span>
 <span class="n">channel_index</span> <span class="n">idx</span><span class="p">;</span>
 <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size_in_byte</span><span class="p">;</span>
 <span class="kt">uint64_t</span> <span class="n">delay</span><span class="p">;</span>
 <span class="kt">char</span><span class="o">*</span> <span class="n">data</span><span class="p">;</span>
<span class="p">}</span>
</pre>
</div>
<div class="section" id="wait-for-result">
<h2>Wait for Result<a class="headerlink" href="#wait-for-result" title="Permalink to this headline">¶</a></h2>
<p>Function <code class="docutils literal notranslate"><span class="pre">test_harness_mgr::waitForRes</span></code> is to wait for AI Engine application to finish and get back the result. The only arugment <code class="docutils literal notranslate"><span class="pre">graph_timeout_millisec</span></code> is the time out limit for AI Engine application to finish in milliseconds.</p>
<pre class="highlight literal-block">
<span></span><span class="kt">void</span> <span class="nf">waitForRes</span><span class="p">(</span><span class="kt">int</span> <span class="n">graph_timeout_millisec</span><span class="p">);</span>
</pre>
</div>
<div class="section" id="print-performance">
<h2>Print Performance<a class="headerlink" href="#print-performance" title="Permalink to this headline">¶</a></h2>
<p>Function <code class="docutils literal notranslate"><span class="pre">test_harness_mgr::printPerf()</span></code> is to print total working cycles of each channel. It does not require any arguments but can only be called after <code class="docutils literal notranslate"><span class="pre">test_harness_mgr::waitForRes</span></code> returns.</p>
<pre class="highlight literal-block">
<span></span><span class="kt">void</span> <span class="nf">printPerf</span><span class="p">();</span>
</pre>
</div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hw_feature.html" class="btn btn-neutral float-left" title="Hareware Features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="build_with_harness.html" class="btn btn-neutral float-right" title="Build With Test Harness" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on April 05, 2023.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>